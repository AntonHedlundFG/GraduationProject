\doxysection{CTurn\+Timer\+Subsystem.\+h}
\hypertarget{_c_turn_timer_subsystem_8h_source}{}\label{_c_turn_timer_subsystem_8h_source}\index{TacticalRogueLite/Source/TacticalRogueLite/Public/Utility/TurnTimer/CTurnTimerSubsystem.h@{TacticalRogueLite/Source/TacticalRogueLite/Public/Utility/TurnTimer/CTurnTimerSubsystem.h}}
\mbox{\hyperlink{_c_turn_timer_subsystem_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Fill\ out\ your\ copyright\ notice\ in\ the\ Description\ page\ of\ Project\ Settings.}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}CoreMinimal.h"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}Subsystems/WorldSubsystem.h"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}CTurnTimerSubsystem.generated.h"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_a_c_unit}{ACUnit}};}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \mbox{\hyperlink{_c_turn_timer_subsystem_8h_a3b7b6abd947555868605d95b56d106a6}{DECLARE\_DYNAMIC\_DELEGATE\_OneParam}}(FOnTurnTimerExecute,\ \mbox{\hyperlink{class_a_c_unit}{ACUnit}}*,\ AffectedUnit);}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ UENUM(BlueprintType)}
\DoxyCodeLine{00014\ enum\ class\ \mbox{\hyperlink{_c_turn_timer_subsystem_8h_a3e81423897d558675395effb4cd98522}{EProgressTurnMethod}}\ :\ uint8}
\DoxyCodeLine{00015\ \{}
\DoxyCodeLine{00016\ \ \ \ \ \mbox{\hyperlink{_c_turn_timer_subsystem_8h_a3e81423897d558675395effb4cd98522a17f0a87d62ff30519edbaddfeb944064}{EPTM\_None}},}
\DoxyCodeLine{00017\ \ \ \ \ \mbox{\hyperlink{_c_turn_timer_subsystem_8h_a3e81423897d558675395effb4cd98522a0c15d1559fcd5d6c413e96b1525d86b6}{EPTM\_StartOfTurn}},}
\DoxyCodeLine{00018\ \ \ \ \ \mbox{\hyperlink{_c_turn_timer_subsystem_8h_a3e81423897d558675395effb4cd98522acb29da7bc227a825f78571576166739e}{EPTM\_EndOfTurn}},}
\DoxyCodeLine{00019\ \ \ \ \ \mbox{\hyperlink{_c_turn_timer_subsystem_8h_a3e81423897d558675395effb4cd98522a3f5cd6c59ae04f20d9df640b771fae2b}{EPTM\_Max}}}
\DoxyCodeLine{00020\ \};}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{comment}{//\ A\ return\ type\ created\ by\ SetTimer(),\ used\ to\ ClearTimer()}}
\DoxyCodeLine{00023\ USTRUCT(BlueprintType)}
\DoxyCodeLine{00024\ struct\ \mbox{\hyperlink{struct_f_turn_timer_handle}{FTurnTimerHandle}}}
\DoxyCodeLine{00025\ \{}
\DoxyCodeLine{00026\ \ \ \ \ GENERATED\_BODY()}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ friend\ class\ \mbox{\hyperlink{class_u_c_turn_timer_subsystem}{UCTurnTimerSubsystem}};}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ public:}
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{struct_f_turn_timer_handle}{FTurnTimerHandle}}()\ \{\}}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{struct_f_turn_timer_handle_a4a2543043081d32e5435613fd8247c67}{FTurnTimerHandle}}(uint32\ ID)}
\DoxyCodeLine{00033\ \ \ \ \ \{}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ TimerID\ =\ ID;}
\DoxyCodeLine{00035\ \ \ \ \ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ uint32\ TimerID\ =\ 0;}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \};}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{comment}{//Internal\ struct\ keeping\ track\ of\ an\ individual\ timer}}
\DoxyCodeLine{00044\ USTRUCT()}
\DoxyCodeLine{00045\ struct\ \mbox{\hyperlink{struct_f_turn_timer}{FTurnTimer}}}
\DoxyCodeLine{00046\ \{}
\DoxyCodeLine{00047\ \ \ \ \ GENERATED\_BODY()}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ uint8\ NumberOfTurns\ =\ 0;}
\DoxyCodeLine{00052\ \ \ \ \ uint8\ TurnsRemaining\ =\ 0;}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordtype}{bool}\ bLooping\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00054\ \ \ \ \ \mbox{\hyperlink{_c_turn_timer_subsystem_8h_a3e81423897d558675395effb4cd98522}{EProgressTurnMethod}}\ ProgressTurnMethod\ =\ \mbox{\hyperlink{_c_turn_timer_subsystem_8h_a3e81423897d558675395effb4cd98522a17f0a87d62ff30519edbaddfeb944064}{EProgressTurnMethod::EPTM\_None}};}
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{class_a_c_unit}{ACUnit}}*\ \mbox{\hyperlink{struct_f_turn_timer_a1f520a71fffde9f3e4268abd5b41fcf9}{AffectedUnit}};}
\DoxyCodeLine{00056\ \ \ \ \ FOnTurnTimerExecute\ \mbox{\hyperlink{struct_f_turn_timer_ae5c68d8a351438042a239d56adee2782}{BoundDelegate}};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00063\ UCLASS()}
\DoxyCodeLine{00064\ class\ TACTICALROGUELITE\_API\ \mbox{\hyperlink{class_u_c_turn_timer_subsystem}{UCTurnTimerSubsystem}}\ :\ public\ UWorldSubsystem}
\DoxyCodeLine{00065\ \{}
\DoxyCodeLine{00066\ \ \ \ \ GENERATED\_BODY()}
\DoxyCodeLine{00067\ \ \ \ \ }
\DoxyCodeLine{00068\ \ \ \ \ friend\ class\ \mbox{\hyperlink{class_a_c_game_mode}{ACGameMode}};}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ public:}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00084\ \ \ \ \ UFUNCTION(BlueprintCallable,\ Category\ =\ "{}Turn\ Timer"{})}
\DoxyCodeLine{00085\ \ \ \ \ \mbox{\hyperlink{struct_f_turn_timer_handle}{FTurnTimerHandle}}\ SetTimer(const\ \textcolor{keywordtype}{int}\ InNumberOfTurns,\ }
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_a_c_unit}{ACUnit}}*\ InAffectedUnit,}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ \textcolor{keywordtype}{bool}\ InbLoop,\ }
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ const\ \mbox{\hyperlink{_c_turn_timer_subsystem_8h_a3e81423897d558675395effb4cd98522}{EProgressTurnMethod}}\ InProgressTurnMethod,\ }
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FOnTurnTimerExecute\ InDelegate);}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{comment}{//Invalidates\ the\ handle\ and\ removes\ the\ related\ timer.}}
\DoxyCodeLine{00092\ \ \ \ \ UFUNCTION(BlueprintCallable,\ Category\ =\ "{}Turn\ Timer"{})}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordtype}{void}\ ClearTimer(\mbox{\hyperlink{struct_f_turn_timer_handle}{FTurnTimerHandle}}\ InHandle);}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ UFUNCTION(BlueprintCallable,\ Category\ =\ "{}Turn\ Timer"{})}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordtype}{bool}\ IsTimerActive(\mbox{\hyperlink{struct_f_turn_timer_handle}{FTurnTimerHandle}}\ InHandle);}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ protected:}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{comment}{//\ This\ is\ called\ by\ the\ GameMode\ to\ move\ the\ timer\ forward.\ }}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{comment}{//\ Do\ not\ call\ this\ manually}}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordtype}{void}\ NextTurn(const\ \mbox{\hyperlink{class_a_c_unit}{ACUnit}}*\ PreviousUnit,\ const\ \mbox{\hyperlink{class_a_c_unit}{ACUnit}}*\ NextUnit);}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \ \ TMap<uint32,\ \mbox{\hyperlink{struct_f_turn_timer}{FTurnTimer}}>\ ActiveTurnTimers;}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{comment}{//Used\ internally\ to\ generate\ ID\ for\ new\ timers.}}
\DoxyCodeLine{00107\ \ \ \ \ uint32\ LastTimerID\ =\ 0;}
\DoxyCodeLine{00108\ \ \ \ \ }
\DoxyCodeLine{00109\ \};}

\end{DoxyCode}
